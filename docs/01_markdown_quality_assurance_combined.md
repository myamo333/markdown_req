# Markdown要件定義書の品質保証ライン導入
## 書けば整う要件書を実現する仕組み

---

## 背景と目的

- 要件定義書を **Markdown形式** で作成・管理へ移行  
- 今後のAI活用を見据えた運用にも適している  
- 軽量でGitと相性が良い  
- ただし、以下のような形式統一の課題がある：
  - 見出し・章番号の不統一  
  - 用語の表記ゆれ（例：「ドライバー」「ドライバ」）  
  - 文体や句読点の混在  
  - フォーマットの差異  
  - 内容より形式の指摘が増加  

> **目的：**  
> 形式・用語・構成を自動で整える仕組みを導入し、  
> 要件書の品質を“仕組みで維持”する。

---

## 要件コード化の効果と成果

| 観点         | 効果・成果内容                                           |
| ------------ | -------------------------------------------------------- |
| 品質向上     | 書式・表記・構成のブレを防止し、要件書の品質を一定に保つ |
| 効率化       | 形式修正の手間を減らし、レビューを内容中心にシフト       |
| 変更履歴管理 | Gitによる差分・履歴・変更理由の追跡が容易                |
| レビュー性   | Pull Requestでレビュー可能、改善提案を履歴化             |
| 再利用性     | 章や要件を分割・テンプレ化して流用可能                   |
| 自動化       | lint, CI, スクリプト連携で形式統一を自動保証             |
| 教育効果     | Lint警告を通じて記述ルールを自然習得                     |
| 透明性       | 用語辞書・ルール変更をPR履歴で可視化                     |
| 継続性       | チームでルールを共有し、改善・進化を継続可能             |
| 軽量性       | Wordより崩れず、誰でも簡単に編集可能                     |

> **要件定義を“コード化”することで、  
> 品質・効率・教育・継続性を兼ね備えた開発ドキュメント基盤を実現。**

---

## 品質チェックの全体像

| 段階         | 自動処理               | 使用技術                                        |
| ------------ | ---------------------- | ----------------------------------------------- |
| 執筆中       | リアルタイムLint警告   | VS Code拡張（markdownlint / textlint / cspell） |
| 保存時       | 改行・空白整形         | Prettier                                        |
| コミット時   | lint実行・違反ブロック | pre-commit（軽量モード）                        |
| PR時         | CI再検査・マージ制御   | GitHub Actions（CI）                            |
| 章構成変更時 | 自動再採番             | toc.yml + スクリプト                            |
| 用語統一     | チーム辞書             | prh.yml（Pull Requestで更新）                   |

> 書く → 保存 → コミット → PR → マージ  
品質チェックが自動連鎖。

---

## 品質管理フロー（概要）

```
flowchart TD
    A[要件執筆<br>VS Code + Lint警告] --> B[保存<br>Prettier整形]
    B --> C[コミット<br>pre-commit軽量チェック]
    C --> D[Pull Request<br>CIで再検査]
    D --> E[章番号自動再採番<br>toc.yml管理]
    E --> F[用語辞書運用<br>PRによる更新]
```

> 要件作成からマージまで、要件書の品質が常に自動維持される。

---

## Markdown記述ルールと対応技術

| 要素       | 記述例                                                    | 補足              | 技術                           |
| ---------- | --------------------------------------------------------- | ----------------- | ------------------------------ |
| 章見出し   | `# 第1章 システム概要`                                    | toc.ymlで構造管理 | markdownlint, 再採番スクリプト |
| 要件文     | `- [REQ-001] システムは～できること。`                    | ID追跡可          | textlint, pre-commit           |
| 条件文     | `> 条件：～のとき、システムは～する。`                    | 分岐明示          | markdownlint, textlint         |
| 表形式     | `                                                         | 項目              | 内容                           | ` | 構造情報（機能一覧・信号定義等）を整理 | markdownlint, Prettier |
| 箇条書き   | `- ～すること`                                            | 同レベル要件群    | markdownlint                   |
| 番号リスト | `1. ～する`                                               | 手順・順序        | markdownlint, Prettier         |
| 注意書き   | `> 注意：～に限定される`                                  | 制約・特記事項    | textlint（禁止語チェック）     |
| コード名   | `` `SPEED_SENSOR_STATUS` ``                               | 信号・変数名      | cspell                         |
| 参照リンク | `[第2章 機能要件](../system_requirements/02_機能要件.md)` | 他章参照          | markdown-link-check CI         |
| 用語定義   | `**PCS**（Pre-Crash Safety）`                             | 略語初出で展開    | prh.yml, textlint              |
| 文体統一   | 「である調」                                              | 一貫性維持        | textlintルールセット           |

---

## 今後の展開（参考）

| フェーズ         | 内容                                         | 目的・狙い                           |
| ---------------- | -------------------------------------------- | ------------------------------------ |
| **今回導入**     | Markdown要件定義＋自動品質ライン＋チーム辞書 | ドキュメント標準化と品質の安定化     |
| **次のステップ** | AIによる要件文自動提案・レビュー支援         | 作成・レビュー工数の削減と説明性向上 |
| **将来構想**     | ナレッジ連携                                 | 知識資産化                           |
---

## まとめ

> **Markdownで書く要件定義を、品質保証ラインと一体化する。**  
>  
> - 書けば自動で整う  
> - チームでルールを共有・改善  
> - 内容レビューに集中できる  
>
> 要件書そのものを  
> “継続的に成長するプロダクト”として運用する。
